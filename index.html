<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
	<script src="moment.js"></script>
	<style type='text/css'>
		body{
			background-color:SteelBlue;
		}
		.tweet {
			width:500px; 
			background-color:LightSteelBlue; 
			margin:auto;
			border:solid 1px DarkSlateGray;
		}
		.button{
			width:100px;
			background-color:magenta;
			float:left;
		}
		.uname{
			color:navy;
		}
		div {
			clear:both;
			color:DarkSlateGray;
		}
		.postTime{
			text-align:right;
		}
		.text{
			font-size:14pt;
		}
	</style>
  </head>
  <body>
    <script>
	
	function pushTweets (oldCount) {
		var $body = $('body');
        //$body.html('');

        var index = streams.home.length - 1;
        while(oldCount <= index){
          var tweet = streams.home[oldCount];
		  var $uname = $('<div class = "uname"></div>');
		  $uname.text('@' + tweet.user);
          var $tweet = $('<div class = "text"></div>');
          $tweet.text(tweet.message);
		  var $postTime = $('<div class="postTime"></div>');
		  $postTime.text(moment().calendar(tweet.created_at));
		  $('.tweetContain').prepend('<div class="tweet"></div>');
		  $('.tweet:first').append($uname);
          $('.tweet:first').append($tweet);
		  $('.tweet:first').append($postTime);
         oldCount += 1;
        }
	}
	var schedulePushTweets = function(oldCount){
		pushTweets(oldCount);
		index = streams.home.length;
		setTimeout(function () {
			schedulePushTweets(index)
			}, 5000);
	};
	
	
    $(document).ready(function(){
		pushTweets(0);
		var currCount = streams.home.length ;
		schedulePushTweets(currCount);

      });

    </script>
	<div class='tweetContain' > </div>
  </body>
</html>
